<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <title>Clients</title>
    <meta charset="utf-8">
    <!--fonts awesome-->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css"
          integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">

    <!-- bootstrap kit-->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link  th:href="@{/bootstrap/css/bootstrap.min.css}" rel="stylesheet">

    <link th:href="@{/footer.css}" rel="stylesheet">
    <!-- pagination -->
    <link th:href="@{/pagination/css/style.css}" rel="stylesheet"/>


    <style>
        /* enable absolute positioning */
.inner-addon {
    position: relative;
}

/* style icon */
.inner-addon .glyphicon {
  position: absolute;
  padding: 10px;
  pointer-events: none;
}

/* align icon */
.left-addon .glyphicon  { left:  0px;}
.right-addon .glyphicon { right: 0px;}

/* add padding  */
.left-addon input  { padding-left:  30px; }
.right-addon input { padding-right: 30px; }


    </style>

</head>

<body class="bg-light">
<!--<body style="background-color:#E9EBEE">-->
<div th:insert="header.html"></div>

<div class="modal fade" id="confirm-delete" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
     aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h3>
                    <small>Видалити дані клієнта?</small>
                </h3>
            </div>
            <div class="modal-body">
                <h4></h4>
                <br><br>
                <a class="btn btn-primary btn-block btn-ok">Видалити</a>
                <button type="button" class="btn btn-light text-secondary btn-block" data-dismiss="modal">Назад
                </button>
            </div>
        </div>
    </div>
</div>

<div class="container col-md-10" style="float: none; margin: 0 auto;">
    <br>
    <!--<div class="my-3 p-3 bg-light rounded shadow-sm">-->
    <div class="row mb-2 align-items-end">
        <div class="col">
            <h3>Клієнти</h3>
        </div>
        <div class="col">
            <a class="btn btn-sm btn-link float-right"
               th:href="@{/clients/add}"><i class="far fa-user"></i>&nbsp;Новий клієнт</a>
        </div>
    </div>

    <div class="inner-addon left-addon mb-2">
        <i class="glyphicon fas fa-search text-secondary"></i>
        <input class="form-control" id="inputSearch" type="text"
               placeholder="Введіть ім'я, прізвище або номер телефону">
    </div>
    <table class="table table-hover bg-white rounded shadow-sm" id="clientListTable">
        <tbody id="clientTable">
        <tr th:each="client : ${clients}">
            <td><span th:text="${client.name}"/>
                <span th:text="${client.otherClientInfo}"/> <!-- class="fonts-weight-bold text-secondary" -->
                <div th:with="phoneNumber=${client.phoneNumber}"
                     class="contact-info font-weight-light"
                     th:text="'('+${#strings.substring(phoneNumber,0,3)}+')'
								+' '+${#strings.substring(phoneNumber,3,5)}
								+'-'+${#strings.substring(phoneNumber,5,7)}
								+'-'+${#strings.substring(phoneNumber,7)}">
                </div>
                <div th:class="font-weight-light" th:text="${client.email}"/>
            </td>
            <td><p class="float-right">
								<span><a th:href="@{/client/{clientId}/edit(clientId=${client.id})}">
								<i class="fas fa-pencil-alt" aria-hidden="true"></i></a>&emsp;&emsp;</span>
                <span><a href="#" th:data-href="@{/client/{clientId}/remove(clientId=${client.id})}"
                         th:data-client="${client.name}+' '+${client.otherClientInfo}" data-toggle="modal"
                         data-target="#confirm-delete">
									<i class="far fa-trash-alt text-secondary" aria-hidden="true"></i></a></span>
            </td>
        </tr>
        </tbody>
    </table>
    <div class="row">
        <div class="form-group col-md-1">
            <select class="form-control pagination" id="clientsPageSizeSelect">
                <option th:each="pageSize : ${pageSizes}" th:text="${pageSize}" th:value="${pageSize}"
                        th:selected="${pageSize} == ${selectedPageSize}"></option>
            </select>
        </div>
        <div th:if="${clients.totalPages != 1}" class="form-group col-md-11 pagination-centered">
            <ul class="pagination">
                <li th:class="${clients.number == 0} ? disabled">
                    <a class="page-link" th:href="@{/clients(pageSize=${selectedPageSize}, page=1)}">&laquo;</a>
                </li>
                <li th:class="${clients.number == 0} ? disabled">
                    <a class="page-link" th:href="@{/clients(pageSize=${selectedPageSize}, page=${clients.number})}">&larr;</a>
                </li>
                <li th:class="${clients.number == (page - 1)} ? 'page-item active pointer-disabled'"
                    th:each="page : ${#numbers.sequence(pager.startPage, pager.endPage)}">
                    <a class="page-link" th:href="@{/clients(pageSize=${selectedPageSize}, page=${page})}"
                       th:text="${page}"></a>
                </li>
                <li th:class="${clients.number + 1 == clients.totalPages} ? disabled">
                    <a class="page-link"
                       th:href="@{/clients(pageSize=${selectedPageSize}, page=${clients.number + 2})}">&rarr;</a>
                </li>
                <li th:class="${clients.number + 1 == clients.totalPages} ? disabled">
                    <a class="page-link"
                       th:href="@{/clients(pageSize=${selectedPageSize}, page=${clients.totalPages})}">&raquo;</a>
                </li>
            </ul>
        </div>
    </div>



    <!-- Pagination Bar -->



    <!--</div>-->
    <!--<div>-->
        <!--<ul th:class="pagination">-->
            <!--<li th:if="${clientPage.number+1 > 1}">-->
                <!--<a th:href="@{/clients(page=${clientPage.number+1-1})}" th:class="page-link">Prev</a>-->
            <!--</li>-->
            <!--<li th:class="${pageNumber==clientPage.number + 1} ? 'page-item active' : 'page-item'"-->
                <!--th:if="${clientPage.totalPages > 0}" th:each="pageNumber : ${pageNumbers}">-->
                <!--<a th:href="@{/clients(page=${pageNumber})}"-->
                   <!--th:text=${pageNumber}-->
                   <!--th:class="page-link">-->
                <!--</a>-->
            <!--</li>-->
            <!--<li th:if="${clientPage.number+1 < clientPage.totalPages}">-->
                <!--<a th:href="@{/clients(page=${clientPage.number+1+1})}" th:class="page-link">Next</a>-->
            <!--</li>-->
        <!--</ul>-->
    <!--</div>-->

    <!-- th:class="${pageNumber==clientPage.number + 1} ? 'page-link active':'page-link'"-->

    <!--<ul class="pagination">-->
    <!--<li class="page-item"><a class="page-link" href="#">Previous</a></li>-->
    <!--<li class="page-item"><a class="page-link" href="#">1</a></li>-->
    <!--<li class="page-item active"><a class="page-link" href="#">2</a></li>-->
    <!--<li class="page-item"><a class="page-link" href="#">3</a></li>-->
    <!--<li class="page-item"><a class="page-link" href="#">Next</a></li>-->
    <!--</ul>-->

</div>
<div th:insert="footer.html"></div>
<script th:src="@{/ajax/jquery-3.3.1.min.js}"></script>
<script th:src="@{/ajax/popper.min.js}"></script>
<script th:src="@{/bootstrap/js/bootstrap.min.js}"></script>
<script>
			$(document).ready(function(){
		      jQuery(".contact-info").text(function() {
              jQuery(this).replaceWith(
                '<div><a href="tel:' + $(this).text()+ '">' + jQuery(this).text() + "</a></div>"
              );
            });
				$("#inputSearch").on("keyup", function() {
					var value = $(this).val().toLowerCase();
					$("#clientTable tr").filter(function() {
						$(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
					});
				});
				$('#confirm-delete').on('show.bs.modal', function(e) {
					$(this).find('.btn-ok').attr('href', $(e.relatedTarget).data('href'));
					var link = $(e.relatedTarget)
					var clientName = link.data('client');
					$(this).find('.modal-body h4').text(clientName);
				});
            });
    </script>
<script th:src="@{/pagination/js/app.js}"></script>
</body>
</html>